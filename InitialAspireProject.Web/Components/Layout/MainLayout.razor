@using InitialAspireProject.Web.Components
@inherits LayoutComponentBase

<div class="d-flex">
    <!-- Sidebar -->
    <div class="bg-dark text-white sidebar d-flex flex-column">
        <NavMenu />
    </div>

    <!-- Main Content -->
    <div class="flex-grow-1 d-flex flex-column">
        <!-- Top Bar -->
        <header class="bg-light border-bottom px-4 py-2 d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <button class="btn btn-outline-secondary d-md-none me-2" type="button" 
                        onclick="document.querySelector('.sidebar').classList.toggle('show')">
                    <i class="bi bi-list"></i>
                </button>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item">
                            <i class="bi bi-house-door me-1"></i>
                            <a href="/" class="text-decoration-none">Home</a>
                        </li>
                    </ol>
                </nav>
            </div>
            
            <div class="d-flex align-items-center gap-3">
                <!-- Theme Selector -->
                <ThemeSelector />
                
                <!-- User Info -->
                <AuthorizeView>
                    <Authorized>
                        <div class="dropdown">
                            <button class="btn btn-outline-primary dropdown-toggle" type="button" 
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-person-circle me-1"></i>
                                @context.User.Identity?.Name
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <h6 class="dropdown-header">
                                        <i class="bi bi-person me-1"></i>
                                        Minha Conta
                                    </h6>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item" href="/profile">
                                        <i class="bi bi-person-gear me-2"></i>
                                        Perfil
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="/settings">
                                        <i class="bi bi-gear me-2"></i>
                                        Configurações
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item text-danger" href="/logout">
                                        <i class="bi bi-box-arrow-right me-2"></i>
                                        Sair
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </Authorized>
                    <NotAuthorized>
                        <a href="/login" class="btn btn-primary">
                            <i class="bi bi-box-arrow-in-right me-1"></i>
                            Login
                        </a>
                    </NotAuthorized>
                </AuthorizeView>
                
                <!-- Additional Links -->
                <a href="https://learn.microsoft.com/aspnet/core/" target="_blank" 
                   class="btn btn-outline-secondary btn-sm">
                    <i class="bi bi-book me-1"></i>
                    Docs
                </a>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="flex-grow-1 bg-light">
            <div class="container-fluid p-4">
                @Body
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-white border-top py-3 px-4">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <small class="text-muted">
                        © 2024 Initial Aspire Project - Construído com ASP.NET Core e Bootstrap
                    </small>
                </div>
                <div>
                    <small class="text-muted">
                        <i class="bi bi-code-slash me-1"></i>
                        Versão 1.0.0
                    </small>
                </div>
            </div>
        </footer>
    </div>
</div>

<!-- Error UI -->
<div id="blazor-error-ui" class="alert alert-danger position-fixed bottom-0 end-0 m-3 shadow" 
     style="display: none; z-index: 1050; max-width: 400px;">
    <div class="d-flex align-items-center">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <div class="flex-grow-1">
            <strong>Erro:</strong> Ocorreu um erro não tratado.
        </div>
        <div class="ms-3">
            <a href="" class="btn btn-sm btn-outline-danger me-2">
                <i class="bi bi-arrow-clockwise"></i>
            </a>
            <button class="btn btn-sm btn-danger" 
                    onclick="document.getElementById('blazor-error-ui').style.display='none'">
                <i class="bi bi-x"></i>
            </button>
        </div>
    </div>
</div>